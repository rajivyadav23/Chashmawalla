jQuery(document).ready(function(e){"use strict";var o=!1;e(window).scroll(function(){setTimeout(function(){var a=window.pageYOffset,t=window.innerHeight,n=e("html").outerHeight();e(".infinite-scroll").each(function(){var s=e(this).offset().top,r=e(this).outerHeight();if(!o&&(a+t>=s+r+100||a+t>=n&&s<a+t)){var l=e(this);if(o=!0,l.hasClass("products")){(i=l.closest(".yit-wcan-container").siblings(".more-container").children(".btn-more")).length||(i=l.closest(".woocommerce").find(".more-container").children(".btn-more")),e(document).on("molla_before_ajax_load_products",function(e,o,a){o.hasClass("infinite-scroll")&&(a.parent().addClass("molla-loading"),o.removeClass("molla-loading"))}),i.trigger("click"),e(document).on("molla_ajax_load_products_success",function(e,a,t){if(a.hasClass("infinite-scroll")){o=!1,t.parent(".more-container").removeClass("molla-loading");var n=a.closest(".woocommerce").find(".woocommerce-result-count"),s=JSON.parse(a.attr("data-props"));s.extra_atts.page==s.total_pages?(l.removeClass("infinite-scroll"),t.parent(".more-container").hide(),n.children(":not(.to):not(.total)").remove(),n.children(".to").text("all ")):n.children(".to").text(a.children().length)}})}else if(l.hasClass("posts")){var i=l.siblings(".more-container").children(".btn-more");i.parent().addClass("molla-loading"),e(document).on("molla_before_ajax_load_posts",function(e,o,a){o.hasClass("infinite-scroll")&&o.removeClass("molla-loading")}),i.trigger("click"),e(document).on("molla_ajax_load_posts_success",function(e,a,t){if(a.hasClass("infinite-scroll")){o=!1,t.parent(".more-container").removeClass("molla-loading");var n=JSON.parse(a.attr("data-props")),s=JSON.parse(a.attr("data-page-props"));Number(s.paged)>=Number(n.max_num_pages)&&(l.removeClass("infinite-scroll"),t.parent(".more-container").hide())}})}}})},100)})});